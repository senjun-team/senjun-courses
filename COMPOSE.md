# Локальный запуск проекта SenJun

Чтобы локально поднять сайт и необходимые для его работы микросервисы, у вас должны быть установлены:
- `docker-compose`
- `make`

## Перед запуском

Склонируйте к себе два проекта: 
- [senjun-courses](https://github.com/senjun-team/senjun-courses) - тексты курсов и обвязка для запуска инфраструктуры.
- [senjun-images](https://github.com/senjun-team/senjun-images) - docker-образы для запуска задач.

Оба проекта должны находиться _на одном уровне_ в вашей иерархии директорий:

```bash
git clone https://github.com/senjun-team/senjun-courses.git
git clone https://github.com/senjun-team/senjun-images.git
```

Подгрузите самбодули проекта `senjun-courses`:

```bash
cd senjun-courses
git submodule update --init --recursive
```

## Запуск

Вся инфраструктура запускается одной командой из корня проекта `senjun-courses`:

```bash
make start_services -j2
```

Число после опции `-j` задает количество потоков, в которые собираются docker-образы. При первом запуске команда должна собрать все образы, накатить миграции и подготовить к старту микросервисы. Поэтому _первый_ запуск может быть долгим. Повторные - быстрее.

Если команда завершилась успехом, вы можете открыть в браузере локальный адрес и начать работать с сайтом:

```
http://127.0.0.1:8001/
```

На сайте уже создан пользователь. Логин `admin`, пароль `admin`. Залогиньтесь, чтобы иметь возможность запускать код в песочнице и решать задачи.

Для остановки инфраструктуры выполните `make clean`.

## Доступы

### Сайт

- URL сайта: `http://127.0.0.1:8001/`
- Логин: `admin`
- Пароль: `admin`


### pgAdmin

Для работы с БД поднят [pgAdmin](https://www.pgadmin.org/).
- URL админки: `http://127.0.0.1:10000/browser/`
- Логин: `admin@senjun.ru`
- Пароль: `admin`

Для подключения к серверу нужно будет ввести логин/пароль. Эти значения вы можете переопределить в файле `compose-configs/scene/conf.json`:
- `senjun`
- `some_password`

## Логи

Для просмотра логов используйте команду `docker compose logs` с указанием имени контейнера. Например:

```bash
docker compose logs handyman
```