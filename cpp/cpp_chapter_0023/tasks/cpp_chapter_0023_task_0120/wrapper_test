import boost.ut;

#INJECT-b585472fa

struct TestCase
{
    std::string plan;
    int rights = 0;
};

using namespace boost::ut;

void check_case(const TestCase & c)
{
    std::string captured_text;
    auto stdout_receiver = [&captured_text](std::string&& txt)
    {
        captured_text = std::move(txt);
    };

    {
        hlp::stdout_capture_t capture(stdout_receiver);
        print_rights(c.rights)
    }

    const std::string plan = hlp::remove_spaces(c.plan);
    expect(hlp::remove_spaces(captured_text) == plan) << std::format("Expected output of print_rights({}): {}\n Actual output: {}", 
    c.rights, c.plan,
    captured_text) << fatal;
}

int main()
{
    /*
            {.user=7, .group=6, .other=4, .plan=500},
            {.user=0, .group=0, .other=0, .plan=0},
            {.user=6, .group=4, .other=4, .plan=420},
            {.user=1, .group=5, .other=1, .plan=105},
    */

    "Simple cases"_test = [] {
        const std::string text = "user={} group={} other={}";

        std::vector<TestCase> cases = {
            {.plan=std::format(text, 7, 6, 4), .rights=500},
            {.plan=std::format(text, 0, 0, 0), .rights=0},
            {.plan=std::format(text, 6, 4, 4), .rights=420},
            {.plan=std::format(text, 1, 5, 1), .rights=105},
        };
    };
}